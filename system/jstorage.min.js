(function(f){function j(){try{d.jStorage=m(c);if(e){e.setAttribute("jStorage",d.jStorage);e.save("jStorage")}k=d.jStorage?String(d.jStorage).length:0}catch(a){}}function l(a){if(!a||typeof a!="string"&&typeof a!="number")throw new TypeError("Key name must be string or numeric");return true}if(!f||!(f.toJSON||Object.toJSON||window.JSON))throw Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!");var c={},d={jStorage:"{}"},e=null,k=0,m=f.toJSON||Object.toJSON||window.JSON&&(JSON.encode||
JSON.stringify),n=f.evalJSON||window.JSON&&(JSON.decode||JSON.parse)||function(a){return String(a).evalJSON()},h=false;_XMLService={isXML:function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":false},encode:function(a){if(!this.isXML(a))return false;try{return(new XMLSerializer).serializeToString(a)}catch(b){try{return a.xml}catch(g){}}return false},decode:function(a){var b="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(g){var i=new ActiveXObject("Microsoft.XMLDOM");
i.async="false";i.loadXML(g);return i};if(!b)return false;a=b.call("DOMParser"in window&&new DOMParser||window,a,"text/xml");return this.isXML(a)?a:false}};f.jStorage={version:"0.1.4.1",set:function(a,b){l(a);if(_XMLService.isXML(b))b={_is_xml:true,xml:_XMLService.encode(b)};c[a]=b;j();return b},get:function(a,b){l(a);if(a in c)return typeof c[a]=="object"&&c[a]._is_xml&&c[a]._is_xml?_XMLService.decode(c[a].xml):c[a];return typeof b=="undefined"?null:b},deleteKey:function(a){l(a);if(a in c){delete c[a];
j();return true}return false},flush:function(){c={};j();try{window.localStorage.clear()}catch(a){}return true},storageObj:function(){function a(){}a.prototype=c;return new a},index:function(){var a=[],b;for(b in c)c.hasOwnProperty(b)&&a.push(b);return a},storageSize:function(){return k},currentBackend:function(){return h}};(function(){if(window.localStorage)try{d=window.localStorage;h="localStorage"}catch(a){}else if(window.globalStorage)try{d=window.globalStorage[window.location.hostname];h="globalStorage"}catch(b){}else{e=
document.createElement("link");if(e.addBehavior){e.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(e);e.load("jStorage");var g="{}";try{g=e.getAttribute("jStorage")}catch(i){}d.jStorage=g;h="userDataBehavior"}else{e=null;return}}if(d.jStorage)try{c=n(String(d.jStorage))}catch(o){d.jStorage="{}"}else d.jStorage="{}";k=d.jStorage?String(d.jStorage).length:0})()})(window.jQuery||window.$);
