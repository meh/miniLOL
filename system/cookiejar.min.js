var CookieJar=Class.create();
CookieJar.prototype={appendString:"__CJ_",initialize:function(a){this.options={expires:3600,path:"",domain:"",secure:""};Object.extend(this.options,a||{});if(this.options.expires!=""){a=new Date;a=new Date(a.getTime()+this.options.expires*1E3);this.options.expires="; expires="+a.toGMTString()}if(this.options.path!="")this.options.path="; path="+escape(this.options.path);if(this.options.domain!="")this.options.domain="; domain="+escape(this.options.domain);this.options.secure=this.options.secure==
"secure"?"; secure":""},put:function(a,b){a=this.appendString+a;cookie=this.options;switch(typeof b){case "undefined":case "function":case "unknown":return false;case "boolean":case "string":case "number":b=String(b.toString())}var c=a+"="+escape(Object.toJSON(b));try{document.cookie=c+cookie.expires+cookie.path+cookie.domain+cookie.secure}catch(d){return false}return true},remove:function(a){a=this.appendString+a;cookie=this.options;try{var b=new Date;b.setTime(b.getTime()-36E5);var c="; expires="+
b.toGMTString();document.cookie=a+"="+c+cookie.path+cookie.domain+cookie.secure}catch(d){return false}return true},get:function(a){a=this.appendString+a;return(a=document.cookie.match(a+"=(.*?)(;|$)"))?unescape(a[1]).evalJSON():null},empty:function(){keys=this.getKeys();size=keys.size();for(i=0;i<size;i++)this.remove(keys[i])},getPack:function(){pack={};keys=this.getKeys();size=keys.size();for(i=0;i<size;i++)pack[keys[i]]=this.get(keys[i]);return pack},getKeys:function(){keys=$A();keyRe=/[^=; ]+(?=\=)/g;
str=document.cookie;for(CJRe=RegExp("^"+this.appendString);(match=keyRe.exec(str))!=undefined;)CJRe.test(match[0].strip())&&keys.push(match[0].strip().gsub("^"+this.appendString,""));return keys}};CookieJar.prototype.set=CookieJar.prototype.put;
